\begin{quote}
Promisify a callback-\/style function \end{quote}


\subsection*{Install}


\begin{DoxyCode}
$ npm install --save pify
\end{DoxyCode}


\subsection*{Usage}


\begin{DoxyCode}
const fs = require('fs');
const pify = require('pify');

// promisify a single function

pify(fs.readFile)('package.json', 'utf8').then(data => \{
  console.log(JSON.parse(data).name);
  //=> 'pify'
\});

// or promisify all methods in a module

pify(fs).readFile('package.json', 'utf8').then(data => \{
  console.log(JSON.parse(data).name);
  //=> 'pify'
\});
\end{DoxyCode}


\subsection*{A\+PI}

\subsubsection*{pify(input, \mbox{[}promise\+Module\mbox{]}, \mbox{[}options\mbox{]})}

Returns a promise wrapped version of the supplied function or module.

\paragraph*{input}

Type\+: {\ttfamily function}, {\ttfamily object}

Callback-\/style function or module whose methods you want to promisify.

\paragraph*{promise\+Module}

Type\+: {\ttfamily function}

Custom promise module to use instead of the native one.

Check out \href{https://github.com/floatdrop/pinkie-promise}{\tt {\ttfamily pinkie-\/promise}} if you need a tiny promise polyfill.

\paragraph*{options}

\subparagraph*{multi\+Args}

Type\+: {\ttfamily boolean} ~\newline
Default\+: {\ttfamily false}

By default, the promisified function will only return the second argument from the callback, which works fine for most A\+P\+Is. This option can be useful for modules like {\ttfamily request} that return multiple arguments. Turning this on will make it return an array of all arguments from the callback, excluding the error argument, instead of just the second argument.


\begin{DoxyCode}
const request = require('request');
const pify = require('pify');

pify(request, \{multiArgs: true\})('https://sindresorhus.com').then(result => \{
  const [httpResponse, body] = result;
\});
\end{DoxyCode}


\subparagraph*{include}

Type\+: {\ttfamily array} of ({\ttfamily string}$\vert${\ttfamily regex})

Methods in a module to promisify. Remaining methods will be left untouched.

\subparagraph*{exclude}

Type\+: {\ttfamily array} of ({\ttfamily string}$\vert${\ttfamily regex}) ~\newline
Default\+: {\ttfamily \mbox{[}/.+\+Sync\$/\mbox{]}}

Methods in a module {\bfseries not} to promisify. Methods with names ending with `\textquotesingle{}Sync'\`{} are excluded by default.

\subparagraph*{exclude\+Main}

Type\+: {\ttfamily boolean} ~\newline
Default\+: {\ttfamily false}

By default, if given module is a function itself, this function will be promisified. Turn this option on if you want to promisify only methods of the module.


\begin{DoxyCode}
const pify = require('pify');

function fn() \{
  return true;
\}

fn.method = (data, callback) => \{
  setImmediate(() => \{
    callback(data, null);
  \});
\};

// promisify methods but not fn()
const promiseFn = pify(fn, \{excludeMain: true\});

if (promiseFn()) \{
  promiseFn.method('hi').then(data => \{
    console.log(data);
  \});
\}
\end{DoxyCode}


\subsection*{License}

M\+IT Â© \href{http://sindresorhus.com}{\tt Sindre Sorhus} 