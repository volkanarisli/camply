\section*{~\newline
  ~\newline
 ~\newline
 ~\newline
 }

\begin{quote}
Simplified H\+T\+TP requests \end{quote}


\href{https://travis-ci.org/sindresorhus/got}{\tt } \href{https://coveralls.io/github/sindresorhus/got?branch=master}{\tt } \href{https://npmjs.com/got}{\tt }

A nicer interface to the built-\/in \href{http://nodejs.org/api/http.html}{\tt {\ttfamily http}} module.

It supports following redirects, promises, streams, retries, automagically handling gzip/deflate and some convenience options.

Created because \href{https://github.com/request/request}{\tt {\ttfamily request}} is bloated $\ast$(several megabytes!)$\ast$.

\subsection*{Install}

$\ast$$\ast$\+W\+A\+R\+N\+I\+NG\+: Node.\+js 4 or higher is required for got@6 and above.$\ast$$\ast$ For older Node.\+js versions use \href{https://github.com/sindresorhus/got/tree/v5.x}{\tt got@5}.


\begin{DoxyCode}
$ npm install --save got
\end{DoxyCode}


\subsection*{Usage}


\begin{DoxyCode}
const fs = require('fs');
const got = require('got');

got('todomvc.com')
  .then(response => \{
    console.log(response.body);
    //=> '<!doctype html> ...'
  \})
  .catch(error => \{
    console.log(error.response.body);
    //=> 'Internal server error ...'
  \});

// Streams
got.stream('todomvc.com').pipe(fs.createWriteStream('index.html'));

// For POST, PUT and PATCH methods got.stream returns a WritableStream
fs.createReadStream('index.html').pipe(got.stream.post('todomvc.com'));
\end{DoxyCode}


\subsubsection*{A\+PI}

It\textquotesingle{}s a {\ttfamily G\+ET} request by default, but can be changed in {\ttfamily options}.

\paragraph*{got(url, \mbox{[}options\mbox{]})}

Returns a Promise for a {\ttfamily response} object with a {\ttfamily body} property, a {\ttfamily url} property with the request U\+RL or the final U\+RL after redirects, and a {\ttfamily request\+Url} property with the original request U\+RL.

\subparagraph*{url}

Type\+: {\ttfamily string}, {\ttfamily object}

The U\+RL to request or a \href{https://nodejs.org/api/http.html#http_http_request_options_callback}{\tt {\ttfamily http.\+request} options} object.

Properties from {\ttfamily options} will override properties in the parsed {\ttfamily url}.

\subparagraph*{options}

Type\+: {\ttfamily object}

Any of the \href{http://nodejs.org/api/http.html#http_http_request_options_callback}{\tt {\ttfamily http.\+request}} options.

\subparagraph*{body}

Type\+: {\ttfamily string}, {\ttfamily buffer}, {\ttfamily readable\+Stream}, {\ttfamily object}

{\itshape This is mutually exclusive with stream mode.}

Body that will be sent with a {\ttfamily P\+O\+ST} request.

If present in {\ttfamily options} and {\ttfamily options.\+method} is not set, {\ttfamily options.\+method} will be set to {\ttfamily P\+O\+ST}.

If {\ttfamily content-\/length} or {\ttfamily transfer-\/encoding} is not set in {\ttfamily options.\+headers} and {\ttfamily body} is a string or buffer, {\ttfamily content-\/length} will be set to the body length.

If {\ttfamily body} is a plain object, it will be stringified with \href{https://nodejs.org/api/querystring.html#querystring_querystring_stringify_obj_sep_eq_options}{\tt {\ttfamily querystring.\+stringify}} and sent as {\ttfamily application/x-\/www-\/form-\/urlencoded}.

\subparagraph*{encoding}

Type\+: {\ttfamily string}, {\ttfamily null}~\newline
 Default\+: `\textquotesingle{}utf8'\`{}

Encoding to be used on {\ttfamily set\+Encoding} of the response data. If {\ttfamily null}, the body is returned as a Buffer.

\subparagraph*{json}

Type\+: {\ttfamily boolean}~\newline
 Default\+: {\ttfamily false}

{\itshape This is mutually exclusive with stream mode.}

Parse response body with {\ttfamily J\+S\+O\+N.\+parse} and set {\ttfamily accept} header to {\ttfamily application/json}.

\subparagraph*{query}

Type\+: {\ttfamily string}, {\ttfamily object}~\newline


Query string object that will be added to the request U\+RL. This will override the query string in {\ttfamily url}.

\subparagraph*{timeout}

Type\+: {\ttfamily number}, {\ttfamily object}

Milliseconds to wait for a server to send response headers before aborting request with {\ttfamily E\+T\+I\+M\+E\+D\+O\+UT} error.

Option accepts {\ttfamily object} with separate {\ttfamily connect} and {\ttfamily socket} fields for connection and socket inactivity timeouts.

\subparagraph*{retries}

Type\+: {\ttfamily number}, {\ttfamily function}~\newline
 Default\+: {\ttfamily 5}

Number of request retries when network errors happens. Delays between retries counts with function {\ttfamily 1000 $\ast$ Math.\+pow(2, retry) + Math.\+random() $\ast$ 100}, where {\ttfamily retry} is attempt number (starts from 0).

Option accepts {\ttfamily function} with {\ttfamily retry} and {\ttfamily error} arguments. Function must return delay in milliseconds ({\ttfamily 0} return value cancels retry).

{\bfseries Note\+:} if {\ttfamily retries} is {\ttfamily number}, {\ttfamily E\+N\+O\+T\+F\+O\+U\+ND} and {\ttfamily E\+N\+E\+T\+U\+N\+R\+E\+A\+CH} error will not be retried (see full list in \href{https://github.com/floatdrop/is-retry-allowed/blob/master/index.js#L12}{\tt {\ttfamily is-\/retry-\/allowed}} module).

\subparagraph*{follow\+Redirect}

Type\+: {\ttfamily boolean}~\newline
 Default\+: {\ttfamily true}

Defines if redirect responses should be followed automatically.

\paragraph*{Streams}

\paragraph*{got.\+stream(url, \mbox{[}options\mbox{]})}

{\ttfamily stream} method will return Duplex stream with additional events\+:

\subparagraph*{.on(\textquotesingle{}request\textquotesingle{}, request)}

{\ttfamily request} event to get the request object of the request.

{\bfseries Tip}\+: You can use {\ttfamily request} event to abort request\+:


\begin{DoxyCode}
got.stream('github.com')
  .on('request', req => setTimeout(() => req.abort(), 50));
\end{DoxyCode}


\subparagraph*{.on(\textquotesingle{}response\textquotesingle{}, response)}

{\ttfamily response} event to get the response object of the final request.

\subparagraph*{.on(\textquotesingle{}redirect\textquotesingle{}, response, next\+Options)}

{\ttfamily redirect} event to get the response object of a redirect. The second argument is options for the next request to the redirect location.

\subparagraph*{.on(\textquotesingle{}error\textquotesingle{}, error, body, response)}

{\ttfamily error} event emitted in case of protocol error (like {\ttfamily E\+N\+O\+T\+F\+O\+U\+ND} etc.) or status error (4xx or 5xx). The second argument is the body of the server response in case of status error. The third argument is response object.

\paragraph*{got.\+get(url, \mbox{[}options\mbox{]})}

\paragraph*{got.\+post(url, \mbox{[}options\mbox{]})}

\paragraph*{got.\+put(url, \mbox{[}options\mbox{]})}

\paragraph*{got.\+patch(url, \mbox{[}options\mbox{]})}

\paragraph*{got.\+head(url, \mbox{[}options\mbox{]})}

\paragraph*{got.\+delete(url, \mbox{[}options\mbox{]})}

Sets {\ttfamily options.\+method} to the method name and makes a request.

\subsection*{Errors}

Each error contains (if available) {\ttfamily status\+Code}, {\ttfamily status\+Message}, {\ttfamily host}, {\ttfamily hostname}, {\ttfamily method} and {\ttfamily path} properties to make debugging easier.

In Promise mode, the {\ttfamily response} is attached to the error.

\paragraph*{got.\+Request\+Error}

When a request fails. Contains a {\ttfamily code} property with error class code, like {\ttfamily E\+C\+O\+N\+N\+R\+E\+F\+U\+S\+ED}.

\paragraph*{got.\+Read\+Error}

When reading from response stream fails.

\paragraph*{got.\+Parse\+Error}

When {\ttfamily json} option is enabled and {\ttfamily J\+S\+O\+N.\+parse} fails.

\paragraph*{got.\+H\+T\+T\+P\+Error}

When server response code is not 2xx. Contains {\ttfamily status\+Code} and {\ttfamily status\+Message}.

\paragraph*{got.\+Max\+Redirects\+Error}

When server redirects you more than 10 times.

\subsection*{Proxies}

You can use the \href{https://github.com/koichik/node-tunnel}{\tt {\ttfamily tunnel}} module with the {\ttfamily agent} option to work with proxies\+:


\begin{DoxyCode}
const got = require('got');
const tunnel = require('tunnel');

got('todomvc.com', \{
  agent: tunnel.httpOverHttp(\{
    proxy: \{
      host: 'localhost'
    \}
  \})
\});
\end{DoxyCode}


\subsection*{Cookies}

You can use the \href{https://github.com/jshttp/cookie}{\tt {\ttfamily cookie}} module to include cookies in a request\+:


\begin{DoxyCode}
const got = require('got');
const cookie = require('cookie');

got('google.com', \{
  headers: \{
    cookie: cookie.serialize('foo', 'bar')
  \}
\});
\end{DoxyCode}


\subsection*{Form data}

You can use the \href{https://github.com/form-data/form-data}{\tt {\ttfamily form-\/data}} module to create P\+O\+ST request with form data\+:


\begin{DoxyCode}
const fs = require('fs');
const got = require('got');
const FormData = require('form-data');
const form = new FormData();

form.append('my\_file', fs.createReadStream('/foo/bar.jpg'));

got.post('google.com', \{
  body: form
\});
\end{DoxyCode}


\subsection*{O\+Auth}

You can use the \href{https://github.com/ddo/oauth-1.0a}{\tt {\ttfamily oauth-\/1.\+0a}} module to create a signed O\+Auth request\+:


\begin{DoxyCode}
const got = require('got');
const crypto  = require('crypto');
const OAuth = require('oauth-1.0a');

const oauth = OAuth(\{
  consumer: \{
    key: process.env.CONSUMER\_KEY,
    secret: process.env.CONSUMER\_SECRET
  \},
  signature\_method: 'HMAC-SHA1',
  hash\_function: (baseString, key) => crypto.createHmac('sha1', key).update(baseString).digest('base64')
\});

const token = \{
  key: process.env.ACCESS\_TOKEN,
  secret: process.env.ACCESS\_TOKEN\_SECRET
\};

const url = 'https://api.twitter.com/1.1/statuses/home\_timeline.json';

got(url, \{
  headers: oauth.toHeader(oauth.authorize(\{url, method: 'GET'\}, token)),
  json: true
\});
\end{DoxyCode}


\subsection*{Unix Domain Sockets}

Requests can also be sent via \href{http://serverfault.com/questions/124517/whats-the-difference-between-unix-socket-and-tcp-ip-socket}{\tt unix domain sockets}. Use the following U\+RL scheme\+: {\ttfamily P\+R\+O\+T\+O\+C\+OL\+://unix\+:S\+O\+C\+K\+ET\+:P\+A\+TH}.


\begin{DoxyItemize}
\item {\ttfamily P\+R\+O\+T\+O\+C\+OL} -\/ {\ttfamily http} or {\ttfamily https} $\ast$(optional)$\ast$
\item {\ttfamily S\+O\+C\+K\+ET} -\/ absolute path to a unix domain socket, e.\+g. {\ttfamily /var/run/docker.sock}
\item {\ttfamily P\+A\+TH} -\/ request path, e.\+g. {\ttfamily /v2/keys}
\end{DoxyItemize}


\begin{DoxyCode}
got('http://unix:/var/run/docker.sock:/containers/json');

// or without protocol (http by default)
got('unix:/var/run/docker.sock:/containers/json');
\end{DoxyCode}


\subsection*{Tip}

It\textquotesingle{}s a good idea to set the `\textquotesingle{}user-\/agent'\`{} header so the provider can more easily see how their resource is used. By default, it\textquotesingle{}s the U\+RL to this repo.

\`{}\`{}`js const got = require(\textquotesingle{}got'); const pkg = require(\textquotesingle{}./package.json\textquotesingle{});

got(\textquotesingle{}todomvc.\+com\textquotesingle{}, \{ headers\+: \{ \textquotesingle{}user-\/agent\textquotesingle{}\+: {\ttfamily my-\/module/\$\{pkg.\+version\} (\href{https://github.com/username/my-module}{\tt https\+://github.\+com/username/my-\/module})} \} \}); \`{}\`{}\`{}

\subsection*{Related}


\begin{DoxyItemize}
\item \href{https://github.com/sindresorhus/gh-got}{\tt gh-\/got} -\/ Convenience wrapper for interacting with the Git\+Hub A\+PI
\item \href{https://github.com/samverschueren/travis-got}{\tt travis-\/got} -\/ Convenience wrapper for interacting with the Travis A\+PI
\end{DoxyItemize}

\subsection*{Created by}

\tabulinesep=1mm
\begin{longtabu} spread 0pt [c]{*{2}{|X[-1]}|}
\hline
\rowcolor{\tableheadbgcolor}\multicolumn{2}{|p{(\linewidth-\tabcolsep*2-\arrayrulewidth*1)*2/2}|}{\cellcolor{\tableheadbgcolor}\textbf{ \mbox{[}!\mbox{[}Sind   }}\\\cline{1-2}
\endfirsthead
\hline
\endfoot
\hline
\rowcolor{\tableheadbgcolor}\multicolumn{2}{|p{(\linewidth-\tabcolsep*2-\arrayrulewidth*1)*2/2}|}{\cellcolor{\tableheadbgcolor}\textbf{ \mbox{[}!\mbox{[}Sind   }}\\\cline{1-2}
\endhead
\href{https://sindresorhus.com}{\tt Sindre Sorhus}  &\href{https://github.com/floatdrop}{\tt Vsevolod Strukchinsky}   \\\cline{1-2}
\end{longtabu}


\subsection*{License}

M\+IT Â© \href{https://sindresorhus.com}{\tt Sindre Sorhus} 