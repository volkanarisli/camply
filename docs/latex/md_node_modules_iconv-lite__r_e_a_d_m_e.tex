
\begin{DoxyItemize}
\item Doesn\textquotesingle{}t need native code compilation. Works on Windows and in sandboxed environments like \href{http://c9.io}{\tt Cloud9}.
\item Used in popular projects like \href{https://github.com/expressjs/body-parser}{\tt Express.\+js (body\+\_\+parser)}, \href{http://gruntjs.com/}{\tt Grunt}, \href{http://www.nodemailer.com/}{\tt Nodemailer}, \href{http://yeoman.io/}{\tt Yeoman} and others.
\item Faster than \href{https://github.com/bnoordhuis/node-iconv}{\tt node-\/iconv} (see below for performance comparison).
\item Intuitive encode/decode A\+PI
\item Streaming support for Node v0.\+10+
\item \mbox{[}Deprecated\mbox{]} Can extend Node.\+js primitives (buffers, streams) to support all iconv-\/lite encodings.
\item In-\/browser usage via \href{https://github.com/substack/node-browserify}{\tt Browserify} ($\sim$180k gzip compressed with Buffer shim included).
\item Typescript \href{https://github.com/ashtuchkin/iconv-lite/blob/master/lib/index.d.ts}{\tt type definition file} included.
\item React Native is supported (need to explicitly {\ttfamily npm install} two more modules\+: {\ttfamily buffer} and {\ttfamily stream}).
\item License\+: M\+IT.
\end{DoxyItemize}

\href{https://npmjs.org/packages/iconv-lite/}{\tt }

\subsection*{Usage}

\#\#\# Basic A\+PI 
\begin{DoxyCode}
var iconv = require('iconv-lite');

// Convert from an encoded buffer to js string.
str = iconv.decode(Buffer.from([0x68, 0x65, 0x6c, 0x6c, 0x6f]), 'win1251');

// Convert from js string to an encoded buffer.
buf = iconv.encode("Sample input string", 'win1251');

// Check if encoding is supported
iconv.encodingExists("us-ascii")
\end{DoxyCode}


\#\#\# Streaming A\+PI (Node v0.\+10+) 
\begin{DoxyCode}
// Decode stream (from binary stream to js strings)
http.createServer(function(req, res) \{
    var converterStream = iconv.decodeStream('win1251');
    req.pipe(converterStream);

    converterStream.on('data', function(str) \{
        console.log(str); // Do something with decoded strings, chunk-by-chunk.
    \});
\});

// Convert encoding streaming example
fs.createReadStream('file-in-win1251.txt')
    .pipe(iconv.decodeStream('win1251'))
    .pipe(iconv.encodeStream('ucs2'))
    .pipe(fs.createWriteStream('file-in-ucs2.txt'));

// Sugar: all encode/decode streams have .collect(cb) method to accumulate data.
http.createServer(function(req, res) \{
    req.pipe(iconv.decodeStream('win1251')).collect(function(err, body) \{
        assert(typeof body == 'string');
        console.log(body); // full request body string
    \});
\});
\end{DoxyCode}


\subsubsection*{\mbox{[}Deprecated\mbox{]} Extend Node.\+js own encodings}

\begin{quote}
N\+O\+TE\+: This doesn\textquotesingle{}t work on latest Node versions. See \href{https://github.com/ashtuchkin/iconv-lite/wiki/Node-v4-compatibility}{\tt details}. \end{quote}



\begin{DoxyCode}
// After this call all Node basic primitives will understand iconv-lite encodings.
iconv.extendNodeEncodings();

// Examples:
buf = new Buffer(str, 'win1251');
buf.write(str, 'gbk');
str = buf.toString('latin1');
assert(Buffer.isEncoding('iso-8859-15'));
Buffer.byteLength(str, 'us-ascii');

http.createServer(function(req, res) \{
    req.setEncoding('big5');
    req.collect(function(err, body) \{
        console.log(body);
    \});
\});

fs.createReadStream("file.txt", "shift\_jis");

// External modules are also supported (if they use Node primitives, which they probably do).
request = require('request');
request(\{
    url: "http://github.com/", 
    encoding: "cp932"
\});

// To remove extensions
iconv.undoExtendNodeEncodings();
\end{DoxyCode}


\subsection*{Supported encodings}


\begin{DoxyItemize}
\item All node.\+js native encodings\+: utf8, ucs2 / utf16-\/le, ascii, binary, base64, hex.
\item Additional unicode encodings\+: utf16, utf16-\/be, utf-\/7, utf-\/7-\/imap.
\item All widespread singlebyte encodings\+: Windows 125x family, I\+S\+O-\/8859 family, I\+B\+M/\+D\+OS codepages, Macintosh family, K\+O\+I8 family, all others supported by iconv library. Aliases like \textquotesingle{}latin1\textquotesingle{}, \textquotesingle{}us-\/ascii\textquotesingle{} also supported.
\item All widespread multibyte encodings\+: C\+P932, C\+P936, C\+P949, C\+P950, G\+B2312, G\+BK, G\+B18030, Big5, Shift\+\_\+\+J\+IS, E\+U\+C-\/\+JP.
\end{DoxyItemize}

See \href{https://github.com/ashtuchkin/iconv-lite/wiki/Supported-Encodings}{\tt all supported encodings on wiki}.

Most singlebyte encodings are generated automatically from \href{https://github.com/bnoordhuis/node-iconv}{\tt node-\/iconv}. Thank you Ben Noordhuis and libiconv authors!

Multibyte encodings are generated from \href{http://www.unicode.org/Public/MAPPINGS/}{\tt Unicode.\+org mappings} and \href{http://encoding.spec.whatwg.org/}{\tt W\+H\+A\+T\+WG Encoding Standard mappings}. Thank you, respective authors!

\subsection*{Encoding/decoding speed}

Comparison with node-\/iconv module (1000x256kb, on Mac\+Book Pro, Core i5/2.\+6 G\+Hz, Node v0.\+12.\+0). Note\+: your results may vary, so please always check on your hardware. \begin{DoxyVerb}operation             iconv@2.1.4   iconv-lite@0.4.7
----------------------------------------------------------
encode('win1251')     ~96 Mb/s      ~320 Mb/s
decode('win1251')     ~95 Mb/s      ~246 Mb/s
\end{DoxyVerb}


\subsection*{B\+OM handling}


\begin{DoxyItemize}
\item Decoding\+: B\+OM is stripped by default, unless overridden by passing {\ttfamily strip\+B\+OM\+: false} in options (f.\+ex. {\ttfamily iconv.\+decode(buf, enc, \{strip\+B\+OM\+: false\})}). A callback might also be given as a {\ttfamily strip\+B\+OM} parameter -\/ it\textquotesingle{}ll be called if B\+OM character was actually found.
\item If you want to detect U\+T\+F-\/8 B\+OM when decoding other encodings, use \href{https://github.com/danielgindi/node-autodetect-decoder-stream}{\tt node-\/autodetect-\/decoder-\/stream} module.
\item Encoding\+: No B\+OM added, unless overridden by {\ttfamily add\+B\+OM\+: true} option.
\end{DoxyItemize}

\subsection*{U\+T\+F-\/16 Encodings}

This library supports U\+T\+F-\/16\+LE, U\+T\+F-\/16\+BE and U\+T\+F-\/16 encodings. First two are straightforward, but U\+T\+F-\/16 is trying to be smart about endianness in the following ways\+:
\begin{DoxyItemize}
\item Decoding\+: uses B\+OM and \textquotesingle{}spaces heuristic\textquotesingle{} to determine input endianness. Default is U\+T\+F-\/16\+LE, but can be overridden with `default\+Encoding\+: \textquotesingle{}utf-\/16be'{\ttfamily option. Strips B\+OM unless}strip\+B\+OM\+: false{\ttfamily .}
\item {\ttfamily Encoding\+: uses U\+T\+F-\/16\+LE and writes B\+OM by default. Use}add\+B\+OM\+: false\`{} to override.
\end{DoxyItemize}

\subsection*{Other notes}

When decoding, be sure to supply a Buffer to decode() method, otherwise \href{https://github.com/ashtuchkin/iconv-lite/wiki/Use-Buffers-when-decoding}{\tt bad things usually happen}. ~\newline
Untranslatable characters are set to ï¿½ or ?. No transliteration is currently supported. ~\newline
Node versions 0.\+10.\+31 and 0.\+11.\+13 are buggy, don\textquotesingle{}t use them (see \#65, \#77). ~\newline
 \subsection*{Testing}


\begin{DoxyCode}
$ git clone git@github.com:ashtuchkin/iconv-lite.git
$ cd iconv-lite
$ npm install
$ npm test

$ # To view performance:
$ node test/performance.js

$ # To view test coverage:
$ npm run coverage
$ open coverage/lcov-report/index.html
\end{DoxyCode}
 