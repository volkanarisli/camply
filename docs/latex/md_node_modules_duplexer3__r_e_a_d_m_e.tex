Like \href{https://github.com/deoxxa/duplexer2}{\tt duplexer2} but using Streams3 without readable-\/stream dependency


\begin{DoxyCode}
var stream = require("stream");

var duplexer3 = require("duplexer3");

var writable = new stream.Writable(\{objectMode: true\}),
    readable = new stream.Readable(\{objectMode: true\});

writable.\_write = function \_write(input, encoding, done) \{
  if (readable.push(input)) \{
    return done();
  \} else \{
    readable.once("drain", done);
  \}
\};

readable.\_read = function \_read(n) \{
  // no-op
\};

// simulate the readable thing closing after a bit
writable.once("finish", function() \{
  setTimeout(function() \{
    readable.push(null);
  \}, 500);
\});

var duplex = duplexer3(writable, readable);

duplex.on("data", function(e) \{
  console.log("got data", JSON.stringify(e));
\});

duplex.on("finish", function() \{
  console.log("got finish event");
\});

duplex.on("end", function() \{
  console.log("got end event");
\});

duplex.write("oh, hi there", function() \{
  console.log("finished writing");
\});

duplex.end(function() \{
  console.log("finished ending");
\});
\end{DoxyCode}



\begin{DoxyCode}
got data "oh, hi there"
finished writing
got finish event
finished ending
got end event
\end{DoxyCode}


\subsection*{Overview}

This is a reimplementation of \href{https://www.npmjs.com/package/duplexer}{\tt duplexer} using the Streams3 A\+PI which is standard in Node as of v4. Everything largely works the same.

\subsection*{Installation}

\href{https://docs.npmjs.com/cli/install}{\tt Available via {\ttfamily npm}}\+:


\begin{DoxyCode}
$ npm i duplexer3
\end{DoxyCode}


\subsection*{A\+PI}

\subsubsection*{duplexer3}

Creates a new {\ttfamily Duplex\+Wrapper} object, which is the actual class that implements most of the fun stuff. All that fun stuff is hidden. D\+ON\textquotesingle{}T L\+O\+OK.


\begin{DoxyCode}
duplexer3([options], writable, readable)
\end{DoxyCode}



\begin{DoxyCode}
const duplex = duplexer3(new stream.Writable(), new stream.Readable());
\end{DoxyCode}


Arguments


\begin{DoxyItemize}
\item {\bfseries options} -\/ an object specifying the regular {\ttfamily stream.\+Duplex} options, as well as the properties described below.
\item {\bfseries writable} -\/ a writable stream
\item {\bfseries readable} -\/ a readable stream
\end{DoxyItemize}

Options


\begin{DoxyItemize}
\item {\bfseries bubble\+Errors} -\/ a boolean value that specifies whether to bubble errors from the underlying readable/writable streams. Default is {\ttfamily true}.
\end{DoxyItemize}

\subsection*{License}

3-\/clause B\+SD. \href{./LICENSE}{\tt A copy} is included with the source.

\subsection*{Contact}


\begin{DoxyItemize}
\item Git\+Hub (\href{http://github.com/deoxxa}{\tt deoxxa})
\item Twitter (\href{http://twitter.com/deoxxa}{\tt })
\item Email (\href{mailto:deoxxa@fknsrs.biz}{\tt deoxxa@fknsrs.\+biz}) 
\end{DoxyItemize}